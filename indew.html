
<script>

function createTask(title, description, priority, state) {
    const date = document.getElementById('date').value;
    const task = document.createElement('div');
    task.className = 'task'; // pour le style

    // Définir la couleur de la bordure en fonction de la priorité
    const borderColor = {
        'P1': 'border-red',
        'P2': 'border-orange',
        'P3': 'border-green'
    }[priority];

    task.classList.add(borderColor);

    task.innerHTML = `
        <h3 class="text-3xl font-bold mb-2">${title}</h3>
        <h6 class="text-2xl mb-3">${description}</h6>
        <div class="flex justify-between items-center">
            <span class="font-bold mb-2">${date}</span>
            <select class="font-bold text-xl border rounded px-1">
                <option ${state === 'To Do' ? 'selected' : ''}>To Do</option>
                <option ${state === 'Doing' ? 'selected' : ''}>Doing</option>
                <option ${state === 'Completed' ? 'selected' : ''}>Completed</option>
            </select>
        </div>
    `;

    // Initialiser les styles pour l'animation
    task.style.opacity = 0;
    task.style.transform = 'translateY(-10px)';
    task.style.transition = 'opacity 0.5s ease, transform 0.5s ease';

    // Ajoutez la tâche au conteneur approprié
    const container = {
        'To Do': todoTasks,
        'Doing': inprogressTasks,
        'Completed': doneTasks
    }[state];

    container.appendChild(task);

    // Forcer le reflow pour que l'animation fonctionne
    task.offsetHeight; // Accessing this property triggers a reflow

    // Réinitialiser les styles pour l'animation
    task.style.opacity = 1;
    task.style.transform = 'translateY(0)';

    updateCounts();

    // Gestion des changements d'état
    const select = task.querySelector('select');
    select.addEventListener('change', () => {
        const newContainer = {
            'To Do': todoTasks,
            'Doing': inprogressTasks,
            'Completed': doneTasks
        }[select.value];

        newContainer.appendChild(task);
        updateCounts();
    });
}

</script>